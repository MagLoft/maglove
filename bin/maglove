#!/usr/bin/env ruby
$:.push File.expand_path("../../lib", __FILE__)

require "maglove"

Dotenv.load

# Set up Hamlet
Hamlet.register_template(:tumblr, MagLove::Template::Tumblr)
Tilt.mappings["haml"] = [MagLove::Tilt::HamlTemplate]
Tilt.mappings["less"] = [MagLove::Tilt::LessTemplate]
Tilt.mappings["yml"] = [MagLove::Tilt::YamlTemplate]
Tilt.mappings["coffee"] = [MagLove::Tilt::CoffeeTemplate]
Tilt.mappings["js"] = [MagLove::Tilt::JsTemplate]
Tilt.mappings["twig"] = [MagLove::Tilt::TwigTemplate]

# Fix RbConfig warning
Object.send :remove_const, :Config
Config = RbConfig

MagLove::Application.new.run
